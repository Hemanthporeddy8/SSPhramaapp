(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2145],{22346:(e,s,t)=>{"use strict";t.d(s,{w:()=>r});var a=t(95155),i=t(12115),n=t(87489),l=t(59434);let r=i.forwardRef((e,s)=>{let{className:t,orientation:i="horizontal",decorative:r=!0,...d}=e;return(0,a.jsx)(n.b,{ref:s,decorative:r,orientation:i,className:(0,l.cn)("shrink-0 bg-border","horizontal"===i?"h-[1px] w-full":"h-full w-[1px]",t),...d})});r.displayName=n.b.displayName},30823:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var a=t(95155),i=t(12115),n=t(35695),l=t(6874),r=t.n(l),d=t(30285),c=t(66695),o=t(22346),x=t(85055),m=t(50172),h=t(12543),j=t(68718),f=t(26597),p=t(52699),u=t.n(p);function b(){let e=(0,n.useRouter)(),s=(0,n.useParams)().invoiceId,[t,l]=(0,i.useState)(null),[p,b]=(0,i.useState)(null),[N,g]=(0,i.useState)(!0),[v,y]=(0,i.useState)(!1);(0,i.useEffect)(()=>{s&&(g(!0),(0,x.kc)(s).then(e=>{e?(l(e),(0,x.mQ)(e.patientId).then(e=>{b(e||null),g(!1)}).catch(e=>{console.error("Failed to load patient data:",e),g(!1)})):(console.error("Invoice not found"),g(!1))}).catch(e=>{console.error("Failed to load invoice data:",e),g(!1)}))},[s]);let w=async()=>{let e=document.getElementById("invoice-card");if(!e)return void console.error("Invoice element not found");y(!0);try{let a=await u()(e,{scale:2,useCORS:!0,backgroundColor:"#ffffff"}),i=a.toDataURL("image/png"),n=new f.Ay({orientation:"portrait",unit:"pt",format:"a4"}),l=n.internal.pageSize.getWidth(),r=n.internal.pageSize.getHeight(),d=a.width,c=a.height,o=d/c,x=l-40,m=x/o;m>r-40&&(x=(m=r-40)*o);let h=(l-x)/2;n.addImage(i,"PNG",h,20,x,m),n.save("invoice-".concat((null==t?void 0:t.invoiceNumber)||s,".pdf"))}catch(e){console.error("Error generating PDF:",e)}finally{y(!1)}};if(N)return(0,a.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center text-lg",children:[(0,a.jsx)(m.A,{className:"h-8 w-8 animate-spin text-primary mr-3"}),"Loading invoice..."]})});if(!t||!p)return(0,a.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"Invoice Not Found"}),(0,a.jsxs)("p",{className:"text-muted-foreground mb-4",children:["The invoice with ID '",s,"' could not be found."]}),(0,a.jsx)(d.$,{asChild:!0,variant:"outline",children:(0,a.jsxs)(r(),{href:"/admin/billing",children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"})," Back to Billing"]})})]})});let A=t.amount,S=t.taxAmount||0,D=A+S;return(0,a.jsxs)("div",{className:"bg-gray-200 min-h-screen p-4 sm:p-6 md:p-8 flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"w-full max-w-4xl mb-4 flex justify-between items-center print:hidden",children:[(0,a.jsxs)(d.$,{variant:"outline",onClick:()=>e.back(),disabled:v,children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"})," Back"]}),(0,a.jsxs)(d.$,{onClick:w,disabled:v,children:[v?(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(j.A,{className:"mr-2 h-4 w-4"}),v?"Downloading...":"Download PDF"]})]}),(0,a.jsxs)(c.Zp,{id:"invoice-card",className:"w-full max-w-4xl p-6 sm:p-8 md:p-10 shadow-lg print:shadow-none print:border-none bg-white",children:[(0,a.jsxs)(c.aR,{className:"text-center p-0 mb-8 border-b-2 border-black pb-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-wider text-black",children:"PATHASSIST LABORATORIES"}),(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mt-2",children:"LABORATORY INVOICE"})]}),(0,a.jsxs)(c.Wu,{className:"p-0",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-x-8 gap-y-2 text-sm mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Bill No:"})," ",t.invoiceNumber]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Patient Name:"})," ",p.name]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Age / Gender:"})," ",(e=>{if(!e)return"N/A";let s=new Date(e),t=new Date,a=t.getFullYear()-s.getFullYear(),i=t.getMonth()-s.getMonth();return(i<0||0===i&&t.getDate()<s.getDate())&&a--,a.toString()})(p.dateOfBirth)," / ",p.gender||"N/A"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Invoice Date:"})," ",new Date(t.issueDate).toLocaleDateString()]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Referred by:"})," Dr. A. Mehta"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Payment Mode:"})," ","Paid"===t.status?"UPI (GPay)":"Pending"]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsxs)("tr",{className:"border-b-2 border-gray-300",children:[(0,a.jsx)("th",{className:"text-left font-semibold p-2",children:"Description"}),(0,a.jsx)("th",{className:"text-right font-semibold p-2",children:"Qty"}),(0,a.jsx)("th",{className:"text-right font-semibold p-2",children:"Rate (₹)"}),(0,a.jsx)("th",{className:"text-right font-semibold p-2",children:"Amount (₹)"})]})}),(0,a.jsx)("tbody",{children:t.items.map((e,s)=>(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("td",{className:"py-2 px-2",children:e.description}),(0,a.jsx)("td",{className:"text-right py-2 px-2",children:e.quantity}),(0,a.jsx)("td",{className:"text-right py-2 px-2",children:e.unitPrice.toFixed(2)}),(0,a.jsx)("td",{className:"text-right py-2 px-2",children:e.total.toFixed(2)})]},s))})]})}),(0,a.jsx)("div",{className:"mt-6 flex justify-end",children:(0,a.jsxs)("div",{className:"w-full max-w-sm space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between p-1",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Subtotal"}),(0,a.jsx)("span",{children:A.toFixed(2)})]}),(0,a.jsxs)("div",{className:"flex justify-between p-1",children:[(0,a.jsx)("span",{children:"CGST"}),(0,a.jsx)("span",{children:(S/2).toFixed(2)})]}),(0,a.jsxs)("div",{className:"flex justify-between p-1",children:[(0,a.jsx)("span",{children:"SGST"}),(0,a.jsx)("span",{children:(S/2).toFixed(2)})]}),(0,a.jsx)(o.w,{className:"my-2 bg-gray-300"}),(0,a.jsxs)("div",{className:"flex justify-between font-bold text-base p-2 bg-gray-100 rounded-md",children:[(0,a.jsx)("span",{children:"Grand Total"}),(0,a.jsxs)("span",{children:["₹",D.toFixed(2)]})]})]})})]}),(0,a.jsxs)(c.wL,{className:"mt-20 flex justify-between items-end p-0 border-t border-dashed pt-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold italic",children:"Authorised Signatory"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Billing Department"})]}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Thank you for choosing PathAssist!"})]})]})]})}},41816:(e,s,t)=>{Promise.resolve().then(t.bind(t,30823))}},e=>{var s=s=>e(e.s=s);e.O(0,[3930,4316,5769,6874,724,3305,8441,1684,7358],()=>s(41816)),_N_E=e.O()}]);